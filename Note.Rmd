---
title: "Note"
output: 
  pdf_document: 
    pandoc_args: [
      "-V", "classoption=twocolumn"
    ]
    keep_tex: yes
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

## R Markdown

This is an R Markdown document. Markdown is a simple formatting syntax for authoring HTML, PDF, and MS Word documents. For more details on using R Markdown see <http://rmarkdown.rstudio.com>.

When you click the **Knit** button a document will be generated that includes both content as well as the output of any embedded R code chunks within the document. You can embed an R code chunk like this:

```{r}
library(SolarData)
lon <- c(100, -100, 0)
lat <- c(10, 0, 90)
LTF.get(lon, lat, directory = "/Volumes/Macintosh Research/Completed works/Solar_Energy_2017c_Entropy/Data/Linke Turbidity")
```




```{r}
#####################################################################
#####################################################################
# library(SolarData)
# #California map information
# California <- maps::map('state', region = 'california', 
#               fill = TRUE, plot = FALSE)
# bd <- maptools::map2SpatialPolygons(California, IDs = 'california',
#       proj4string=sp::CRS("+proj=longlat +datum=WGS84"))
# bndary <- bd@polygons[[1]]@Polygons[[1]]@coords
# bndary_plot <- data.frame(bndary)
# names(bndary_plot) <- c("lon", "lat")
# #generate the regular grid
# res = 0.2
# x1 <- seq(-124.02, -114.1, by = res)
# y1 <- seq(42.05, 32.40, by = -res)
# loc1 <- expand.grid(x1,y1) #regular grid
# loc_reg <- loc1[which(sp::point.in.polygon(point.x = loc1[,1], 
#    point.y = loc1[,2], pol.x = bndary[,1], pol.y = bndary[,2])==1),]
# #generate all points following original, i.e., most granular, grid
# x2 <- seq(-124.02, -114.1, by = 0.04)
# y2 <- seq(42.05, 32.40, by = -0.04)
# loc2 <- expand.grid(x2,y2) #PSM3 grid
# loc_irreg <- loc2[which(sp::point.in.polygon(point.x = loc2[,1], 
#    point.y = loc2[,2], pol.x = bndary[,1], pol.y = bndary[,2])==1),]
# loc_irreg <- loc_irreg[sample(x = 1:nrow(loc_irreg), size = 
#              nrow(loc_reg), replace = FALSE),]
# 
# #####################################################################
# #plot
# data_plot <- data.frame(lon = append(loc_reg[,1], loc_irreg[,1]), 
#                         lat = append(loc_reg[,2], loc_irreg[,2]), 
#                         group = c(rep('regular', nrow(loc_reg)), 
#                         rep('irregular', nrow(loc_irreg))))
# p <- ggplot() + 
#      geom_point(data=data_plot,aes(x=lon,y=lat), size = 0.5)+
#      geom_polygon(data=bndary_plot,aes(x=lon,y=lat), size = 0.5, 
#                   color = 'red', fill = NA)+
#      facet_wrap(~group) +
#      coord_fixed() +
#      scale_x_continuous(limits=c(-124.5, -114), expand = c(0, 0)) +
#      scale_y_continuous(limits=c(32, 42.5), expand = c(0, 0)) +
#      xlab(expression(paste("Longitude [", degree, "]", sep = ""))) +
#      ylab(expression(paste("Latitude [", degree, "]", sep = ""))) +
#      theme_gray() +
#      theme(plot.margin = unit(c(0.5,0.5,0,0), "lines"), 
#            panel.spacing = unit(0.1, "lines"), 
#            text = element_text(size = 7), 
#            legend.position = "none")  
# options(repr.plot.width=7, repr.plot.height=3) #This is only for Jupyter, if you want to output in pdf, using the commented code below
# p
```


```{r}
#####################################################################
#install.packages("devtools", repos = "http://cran.us.r-project.org")
#library("devtools")
#install_github("dazhiyang/SolarData")
#library("SolarData") #load the package
# get PSM data for two locations
# loc <- matrix(c(42.05, 44, -124.02, -120), nrow = 2)
# PSM.get(lat = loc[,1], lon = loc[,2],
#        api_key = "FVltdchrxzBCHiSNF6M7R4ua6BFe4j81fbPp8dDP",
#        attributes = "ghi,dhi,dni",
#        name = "John+Smith", affiliation = "Some+Institute",
#        year = "2016", leap_year = "true", interval = '30',
#        utc = "false", reason_for_use = "research",
#        email = "email@gmail.com", mailing_list = "false")
# 
# setwd()

```





## Including Plots

Note that the `echo = FALSE` parameter was added to the code chunk to prevent printing of the R code that generated the plot.
